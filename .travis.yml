notifications:
  email: false
language: node_js
sudo: false
addons:
  apt:
    packages:
      - expect-dev
      - sshpass
cache:
  directories:
    - i7
    #- Inform
before_install:
  # Travis will make an empty i7 directory because we are caching it, so remove it
  - "[[ ! $(ls -A i7) ]] && rmdir i7 || true"
install:
  - make setup
script:
  - make Kerkerkruip.gblorb
  - if [[ $TRAVIS_REPO_SLUG == i7/kerkerkruip ]] &&
       [[ $TRAVIS_BRANCH == master ]] &&
       [[ $TRAVIS_PULL_REQUEST == false ]]; then make deploy; fi
  - ./tools/travis_tests
